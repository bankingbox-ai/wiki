"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1355],{3905:(e,a,n)=>{n.d(a,{Zo:()=>c,kt:()=>g});var r=n(7294);function o(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function t(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?t(Object(n),!0).forEach((function(a){o(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function l(e,a){if(null==e)return{};var n,r,o=function(e,a){if(null==e)return{};var n,r,o={},t=Object.keys(e);for(r=0;r<t.length;r++)n=t[r],a.indexOf(n)>=0||(o[n]=e[n]);return o}(e,a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(r=0;r<t.length;r++)n=t[r],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),u=function(e){var a=r.useContext(s),n=a;return e&&(n="function"==typeof e?e(a):i(i({},a),e)),n},c=function(e){var a=u(e.components);return r.createElement(s.Provider,{value:a},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},p=r.forwardRef((function(e,a){var n=e.components,o=e.mdxType,t=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(n),p=o,g=d["".concat(s,".").concat(p)]||d[p]||m[p]||t;return n?r.createElement(g,i(i({ref:a},c),{},{components:n})):r.createElement(g,i({ref:a},c))}));function g(e,a){var n=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var t=n.length,i=new Array(t);i[0]=p;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[d]="string"==typeof e?e:o,i[1]=l;for(var u=2;u<t;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},4745:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>t,metadata:()=>l,toc:()=>u});var r=n(7462),o=(n(7294),n(3905));const t={title:"Flujo de trabajo de Lendaas",slug:"lendaas-workflow",authors:["benja"],tags:["tooling","guide"]},i=void 0,l={permalink:"/wiki/blog/lendaas-workflow",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2022-09-29-idea-workflow/index.md",source:"@site/blog/2022-09-29-idea-workflow/index.md",title:"Flujo de trabajo de Lendaas",description:"Definir c\xf3mo desarrollar es complejo. Se intersectan temas de cultura organizacional,",date:"2022-09-29T00:00:00.000Z",formattedDate:"29 de septiembre de 2022",tags:[{label:"tooling",permalink:"/wiki/blog/tags/tooling"},{label:"guide",permalink:"/wiki/blog/tags/guide"}],readingTime:3.985,hasTruncateMarker:!0,authors:[{name:"Benjam\xedn Roa",title:"Desarrollador",url:"https://gitlab.com/broa",imageURL:"https://trello-members.s3.amazonaws.com/5e95bc4f2bc4ae1ad51b9dda/301e1a568b2b6527600023094f223b46/50.png",key:"benja"}],frontMatter:{title:"Flujo de trabajo de Lendaas",slug:"lendaas-workflow",authors:["benja"],tags:["tooling","guide"]},prevItem:{title:"Cr\xf3nica de la elecci\xf3n de un sistema de integraci\xf3n continua",permalink:"/wiki/blog/picking-cicd-system"},nextItem:{title:"C\xf3mo construir un test",permalink:"/wiki/blog/how-to-build-a-test"}},s={authorsImageUrls:[void 0]},u=[{value:"Como sol\xedamos trabajar",id:"como-sol\xedamos-trabajar",level:2},{value:"Feature branching + Drone",id:"feature-branching--drone",level:3},{value:"Pros",id:"pros",level:3},{value:"Contras",id:"contras",level:3},{value:"Por qu\xe9 queremos cambiar",id:"por-qu\xe9-queremos-cambiar",level:3},{value:"Feature toggles: Despliegue !== Release",id:"feature-toggles-despliegue--release",level:2},{value:"Flujos de trabajo ideal",id:"flujos-de-trabajo-ideal",level:2}],c={toc:u},d="wrapper";function m(e){let{components:a,...t}=e;return(0,o.kt)(d,(0,r.Z)({},c,t,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Definir c\xf3mo desarrollar es complejo. Se intersectan temas de cultura organizacional,\nframework de trabajo, acuerdos de equipo, acuerdos t\xe9cnicos y, si le agregas automatizaci\xf3n,\nunas cuantas l\xedneas de c\xf3digo."),(0,o.kt)("p",null,"Dejamos algunas reflexiones y cabezazos que nos hemos dados con este tema."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"workflow",src:n(7324).Z,width:"1400",height:"425"})),(0,o.kt)("h2",{id:"como-sol\xedamos-trabajar"},"Como sol\xedamos trabajar"),(0,o.kt)("h3",{id:"feature-branching--drone"},"Feature branching + Drone"),(0,o.kt)("p",null,"El flujo de trabajo que conocemos ser\xeda m\xe1s o menos as\xed:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Creo una rama a partir de la rama principal del repositorio"),(0,o.kt)("li",{parentName:"ul"},"Dise\xf1o mis test y las mejoras que quiero hacer en el c\xf3digo"),(0,o.kt)("li",{parentName:"ul"},"Creo un ",(0,o.kt)("em",{parentName:"li"},"merge request"),", en ese momento se gatilla un ",(0,o.kt)("em",{parentName:"li"},"pipeline")," en\nel Drone que asegura calidad: audita, ejecuta ",(0,o.kt)("em",{parentName:"li"},"linters")," y tests"),(0,o.kt)("li",{parentName:"ul"},"Si pas\xe9 exitosamente por el proceso de aseguramiento de calidad, habilita\nla opci\xf3n para que sea posible ",(0,o.kt)("em",{parentName:"li"},"mergear")," a la rama principal"),(0,o.kt)("li",{parentName:"ul"},"Ejecuto el ",(0,o.kt)("em",{parentName:"li"},"merge")," y ahora el nuevo c\xf3digo es parte de la rama principal"),(0,o.kt)("li",{parentName:"ul"},"Al empujar un ",(0,o.kt)("em",{parentName:"li"},"tag")," en el repositorio, se gatilla un nuevo ",(0,o.kt)("em",{parentName:"li"},"pipeline")," que,\nadem\xe1s de asegurar calidad, despliega la nueva versi\xf3n del software en\nproducci\xf3n")),(0,o.kt)("p",null,"Desde este lugar comienza nuestro viaje y sobre esta base comienza nuestra conversaci\xf3n."),(0,o.kt)("h3",{id:"pros"},"Pros"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Drone cuenta con una muy linda y amigable interfaz"),(0,o.kt)("li",{parentName:"ul"},"M\xe1s vale diablo conocido que diablo por conocer, ...dicen"),(0,o.kt)("li",{parentName:"ul"},"Nuestra implementaci\xf3n de Drone, si bien utiliza las herramientas provistas\npor ",(0,o.kt)("a",{parentName:"li",href:"https://harness.io"},"Harness")," y la comunidad (",(0,o.kt)("inlineCode",{parentName:"li"},"Drone Server"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"Drone Runner"),",\n",(0,o.kt)("inlineCode",{parentName:"li"},"Drone Autoscaler"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"Drone CLI"),", etc), nos da mucha libertad al momento de personalizar\nla experiencia")),(0,o.kt)("h3",{id:"contras"},"Contras"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"No permite reutilizar variables en los ",(0,o.kt)("em",{parentName:"li"},"pipelines")),(0,o.kt)("li",{parentName:"ul"},"Tiene pocas herramientas para optimizar las tareas que se ejecutan (fuera de crear im\xe1genes docker)"),(0,o.kt)("li",{parentName:"ul"},"De acuerdo a la licencia del mismo Drone, ya estamos fuera de la\nCommunity Edition. Si decidi\xe9ramos quedarnos con esta herramienta, corresponder\xeda\npagarla"),(0,o.kt)("li",{parentName:"ul"},"El flujo de trabajo supone la existencia de ramas y fricciona bastante el desarrollo,\noblig\xe1ndonos a crear diferentes versiones del c\xf3digo y exponi\xe9ndonos a potenciales\nconflictos"),(0,o.kt)("li",{parentName:"ul"},"Para llegar a producci\xf3n, tenemos que pasar dos veces por el proceso de aseguramiento de calidad"),(0,o.kt)("li",{parentName:"ul"},"Dado que los runners est\xe1n desplegados por nosotros en nuestra nube de AWS, decidimos implementar\nel ",(0,o.kt)("inlineCode",{parentName:"li"},"Drone Autoscaler"),", que ofrece la posibilidad de arrancar nuevas m\xe1quinas en la medida que son\nnecesarias. El tiempo que se toma Drone en desplegar m\xe1quinas y luego ejecutar el ",(0,o.kt)("em",{parentName:"li"},"pipeline")," en algunos\ncasos sobrepasaba los 10 minutos, estimamos que es demasiado")),(0,o.kt)("h3",{id:"por-qu\xe9-queremos-cambiar"},"Por qu\xe9 queremos cambiar"),(0,o.kt)("p",null,"Si bien nuestro flujo de trabajo es bastante natural y fluido, creemos que podemos llevarlo al siguiente\nnivel. Adem\xe1s, si bien el Drone tiene muchas bondades, sus limitaciones nos est\xe1n pesando un poco."),(0,o.kt)("h2",{id:"feature-toggles-despliegue--release"},"Feature toggles: Despliegue !== Release"),(0,o.kt)("p",null,"Nuestro flujo de trabajo contempla el despliegue frecuente a producci\xf3n\npero esto no siempre quiere decir que la funcionalidad est\xe1 disponible\npara ser utilizada."),(0,o.kt)("p",null,"El release, el momento en que se libera la funcionalidad a los usuarios,\nest\xe1 asociado a nuestros ",(0,o.kt)("em",{parentName:"p"},"feature toggles")," y la forma en que estos son\nliberados para su uso puede variar de acuerdo a decisiones de negocio. Un\ncliente puede contar con una funcionalidad y otro, no; un usuario puede\ntener acceso a una funcionalidad que est\xe1 en proceso de desarrollo; un pa\xeds\npuede contar con una funcionalidad que otro pa\xeds no; y as\xed."),(0,o.kt)("p",null,"Esto implica que tenemos que acostumbrarnos a la idea de que en nuestro\nsoftware productivo conviven funcionalidades que est\xe1n disponibles con otras\nque no lo est\xe1n. Tienen en com\xfan que todas deben cumplir con nuestro est\xe1ndar de trabajo,\nacuerdos de equipo y contar con test automatizados que nos dan la tranquilidad\nde que, cuando est\xe9n activos, funcionar\xe1n correctamente."),(0,o.kt)("h2",{id:"flujos-de-trabajo-ideal"},"Flujos de trabajo ideal"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"workflow",src:n(4384).Z,width:"2112",height:"780"})),(0,o.kt)("p",null,"Luego de reflexionar, acordamos agregar m\xe1s posibilidades para que el proceso\nde desarrollo sea m\xe1s corto: eliminar la necesidad de contar con una rama\ny poder trabajar directamente con la rama principal de cada repositorio."),(0,o.kt)("p",null,"Dise\xf1amos tres alternativas:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Al empujar cambios en la rama principal, nuestro sistema de integraci\xf3n/despliegue continuo\ntomar\xe1 esa versi\xf3n del c\xf3digo, asegurar\xe1 calidad y desplegar\xe1 en producci\xf3n"),(0,o.kt)("li",{parentName:"ul"},"Al crear un ",(0,o.kt)("em",{parentName:"li"},"merge request"),", solo asegurar\xe1 calidad"),(0,o.kt)("li",{parentName:"ul"},"Al empujar un ",(0,o.kt)("em",{parentName:"li"},"tag")," que incluya la palabra ",(0,o.kt)("inlineCode",{parentName:"li"},"hotfix"),", tomar\xe1 esos cambios, los someter\xe1 al\nproceso de aseguramiento de calidad y desplegar\xe1 los cambios en producci\xf3n")),(0,o.kt)("p",null,"Queremos que el primero de los escenarios sea el m\xe1s com\xfan, pero sabemos que existen algunas\nsituaciones en las que una rama ser\xe1 el camino, por eso mantendremos el segundo flujo de trabajo."),(0,o.kt)("p",null,"El tercero es para situaciones a\xfan m\xe1s excepcionales, en las que por alg\xfan ",(0,o.kt)("em",{parentName:"p"},"bug")," sea necesario\npasar por encima de la \xfaltima versi\xf3n del c\xf3digo que est\xe1 en la rama principal y llegar a producci\xf3n."),(0,o.kt)("p",null,"Ahora se nos viene un proceso de investigaci\xf3n que nos ayude a definir qu\xe9 herramientas\nqueremos utilizar para automatizar este proceso. Ya les iremos contando."))}m.isMDXComponent=!0},7324:(e,a,n)=>{n.d(a,{Z:()=>r});const r=n.p+"assets/images/workflow-main-image-4f5591b64bc3708705a704e62e84d03c.jpeg"},4384:(e,a,n)=>{n.d(a,{Z:()=>r});const r=n.p+"assets/images/workflow-3558cd6b9b16671fe1d65bcca6e9e7c4.png"}}]);