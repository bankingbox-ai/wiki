"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9467],{3905:(e,a,r)=>{r.d(a,{Zo:()=>u,kt:()=>f});var t=r(7294);function n(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function o(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?o(Object(r),!0).forEach((function(a){n(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}function l(e,a){if(null==e)return{};var r,t,n=function(e,a){if(null==e)return{};var r,t,n={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],a.indexOf(r)>=0||(n[r]=e[r]);return n}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],a.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var c=t.createContext({}),s=function(e){var a=t.useContext(c),r=a;return e&&(r="function"==typeof e?e(a):i(i({},a),e)),r},u=function(e){var a=s(e.components);return t.createElement(c.Provider,{value:a},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},p=t.forwardRef((function(e,a){var r=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=s(r),p=n,f=m["".concat(c,".").concat(p)]||m[p]||d[p]||o;return r?t.createElement(f,i(i({ref:a},u),{},{components:r})):t.createElement(f,i({ref:a},u))}));function f(e,a){var r=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=p;var l={};for(var c in a)hasOwnProperty.call(a,c)&&(l[c]=a[c]);l.originalType=e,l[m]="string"==typeof e?e:n,i[1]=l;for(var s=2;s<o;s++)i[s]=r[s];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}p.displayName="MDXCreateElement"},86:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var t=r(7462),n=(r(7294),r(3905));const o={title:"Refactor, \xbfqu\xe9 es y c\xf3mo enfrentarlo?",authors:["benja"],slug:"refactoring-101",tags:["testing","guias","programming"]},i=void 0,l={permalink:"/blog/refactoring-101",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2022-09-19-refactoring-101/index.md",source:"@site/blog/2022-09-19-refactoring-101/index.md",title:"Refactor, \xbfqu\xe9 es y c\xf3mo enfrentarlo?",description:"Martin Fowler tiene un libro completo sobre esto, pens\xe9",date:"2022-09-19T00:00:00.000Z",formattedDate:"19 de septiembre de 2022",tags:[{label:"testing",permalink:"/blog/tags/testing"},{label:"guias",permalink:"/blog/tags/guias"},{label:"programming",permalink:"/blog/tags/programming"}],readingTime:5.255,hasTruncateMarker:!0,authors:[{name:"Benjam\xedn Roa",title:"Desarrollador",url:"https://gitlab.com/broa",imageURL:"https://trello-members.s3.amazonaws.com/5e95bc4f2bc4ae1ad51b9dda/301e1a568b2b6527600023094f223b46/50.png",key:"benja"}],frontMatter:{title:"Refactor, \xbfqu\xe9 es y c\xf3mo enfrentarlo?",authors:["benja"],slug:"refactoring-101",tags:["testing","guias","programming"]},prevItem:{title:"Pair Programming",permalink:"/blog/pair-programming"},nextItem:{title:"\xbfPor qu\xe9 usamos un design-system?",permalink:"/blog/por-que-design-system"}},c={authorsImageUrls:[void 0]},s=[{value:"Qu\xe9 es \ud83d\ude49",id:"qu\xe9-es-",level:2},{value:"Por qu\xe9 refactorizar \u2603\ufe0f",id:"por-qu\xe9-refactorizar-\ufe0f",level:2},{value:"Code smells",id:"code-smells",level:2},{value:"La mentira del gran refactor \ud83d\ude4a",id:"la-mentira-del-gran-refactor-",level:2},{value:"C\xf3mo aprender a refactorizar \ud83e\uddd1\u200d\ud83c\udfeb",id:"c\xf3mo-aprender-a-refactorizar-",level:2},{value:"Pedir feedback",id:"pedir-feedback",level:3},{value:"Pair programming",id:"pair-programming",level:3},{value:"Estudiar y leer",id:"estudiar-y-leer",level:3},{value:"Practicar",id:"practicar",level:3},{value:"Programaci\xf3n en equipo / mob-programming",id:"programaci\xf3n-en-equipo--mob-programming",level:3},{value:"Refactorizando en situaciones inc\xf3modas",id:"refactorizando-en-situaciones-inc\xf3modas",level:2},{value:"C\xf3mo refactorizar",id:"c\xf3mo-refactorizar",level:2},{value:"Errores comunes",id:"errores-comunes",level:2}],u={toc:s},m="wrapper";function d(e){let{components:a,...o}=e;return(0,n.kt)(m,(0,t.Z)({},u,o,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://martinfowler.com/"},"Martin Fowler")," tiene un ",(0,n.kt)("a",{parentName:"p",href:"https://www.martinfowler.com/books/refactoring.html"},"libro completo sobre esto"),", pens\xe9\nque ser\xeda una buena idea al menos tener un art\xedculo que introduzca el t\xf3pico."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"refactor",src:r(6890).Z,width:"1600",height:"711"})),(0,n.kt)("h2",{id:"qu\xe9-es-"},"Qu\xe9 es \ud83d\ude49"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://martinfowler.com/bliki/DefinitionOfRefactoring.html"},"Parafraseando a ",(0,n.kt)("em",{parentName:"a"},"Fowler")),",\ngeneralmente habr\xeda dos maneras de entenderlo:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"Refactor"),", como sustantivo (concepto)"),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},"Es un cambio a la estructura interna del software que lo hace m\xe1s f\xe1cil de entender y\nsimplifica su posterior modificaci\xf3n, pero sin alterar su comportamiento observable."))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"Refactorizar")," como verbo (actividad)"),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},"Ser\xeda la actividad de aplicar estos cambios (conocidos como refactorizaciones) que\nmejoran el dise\xf1o / la soluci\xf3n.")))),(0,n.kt)("p",null,"Y yendo m\xe1s all\xe1, tambi\xe9n podemos entender al refactor como una habilidad,\nque se adquiere con la experiencia\nde refactorizar. Una que como desarrolladores queremos tener."),(0,n.kt)("h2",{id:"por-qu\xe9-refactorizar-\ufe0f"},"Por qu\xe9 refactorizar \u2603\ufe0f"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://imgs.xkcd.com/comics/code_quality.png",alt:"code quality"})),(0,n.kt)("p",null,"Es medio majadero, porque la misma defici\xf3n de Fowler lo explica, pero quer\xeda detenerme en el porqu\xe9.\nRefactorizamos por una serie de razones, intentar\xe9 nombrar algunas de ellas:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Porque trabajamos con TDD, es parte de nuestro flujo de trabajo"),(0,n.kt)("li",{parentName:"ul"},"Porque intentamos mantener patrones ordenados en nuestras piezas"),(0,n.kt)("li",{parentName:"ul"},"Porque intentamos evitar la deuda t\xe9cnica"),(0,n.kt)("li",{parentName:"ul"},"Porque que el c\xf3digo sea entendible y mantenible son argumentos que valoramos")),(0,n.kt)("p",null,"Mantener el refactor como pr\xe1ctica cotidiana nos ayuda a mantener un buen est\xe1ndar de calidad. Refactorizar es parte de nuestra cultura: invertimos en\nmejorar constantemente la calidad."),(0,n.kt)("h2",{id:"code-smells"},"Code smells"),(0,n.kt)("p",null,"Como dice Kent Beck y parafrasea Martin Fowler, existen ciertas\npistas que nos van a ayudar cu\xe1ndo el c\xf3digo es mejorable. El T\xedo Bob\ndice que la calidad del c\xf3digo se mide en la cantidad de ",(0,n.kt)("em",{parentName:"p"},"whatthefucks")," que dices cuando lo revisas."),(0,n.kt)("h2",{id:"la-mentira-del-gran-refactor-"},"La mentira del gran refactor \ud83d\ude4a"),(0,n.kt)("p",null,'Un refactor nunca ser\xe1 una mejora en s\xed mismo. La misma definici\xf3n, nuevamente, lo dice: "sin alterar\nsu comportamiento observable". Por lo tanto es evidente que el refactor se trata de la forma, del c\xf3mo, pero nunca\ndel qu\xe9. El funcionamiento del software se mantiene. Siempre ser\xe1 del \xe1mbito del ',(0,n.kt)("strong",{parentName:"p"},"output")," (una mejora visible para\nel equipo) y no del ",(0,n.kt)("strong",{parentName:"p"},"outcome")," (una nueva capacidad, caracter\xedstica o experiencia para el usuario o cliente)."),(0,n.kt)("p",null,"Por lo mismo, es natural que nuestra metodolog\xeda jam\xe1s considere que al refactor como un ciudadano (\xedtem) leg\xedtimo del backlog.\nSi un equipo quisiera usar su sprint para refactorizar, claro que puede hacerlo, el equpo es aut\xf3nomo. Pero esa decisi\xf3n\nevidentemente tiene costos:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Impacta negativamente en el cycle time (tiempo que se toma el equipo en liberar un feature)"),(0,n.kt)("li",{parentName:"ul"},"No acciona la prioridad establecida por el product owner"),(0,n.kt)("li",{parentName:"ul"},"Es un sprint de ",(0,n.kt)("strong",{parentName:"li"},"output")," y sin ",(0,n.kt)("strong",{parentName:"li"},"outcome"))),(0,n.kt)("p",null,"De ah\xed la real importancia del refactor cotidiano: debiera ayudarnos\na evitar un nivel de deuda t\xe9cnica que cree esa distancia entre el\nincremento actual y el futuro. Incrementos futuros siempre debieran\nser accionables sin un ",(0,n.kt)("strong",{parentName:"p"},"Gran Refactor"),"."),(0,n.kt)("h2",{id:"c\xf3mo-aprender-a-refactorizar-"},"C\xf3mo aprender a refactorizar \ud83e\uddd1\u200d\ud83c\udfeb"),(0,n.kt)("p",null,"Es una habilidad pr\xe1ctica, se aprende y mejora con, adivinen. Exacto: pr\xe1ctica."),(0,n.kt)("p",null,"Algunas ideas:"),(0,n.kt)("h3",{id:"pedir-feedback"},"Pedir feedback"),(0,n.kt)("p",null,"Puede ser pedir ayuda a quien creas que pueda tener alguna idea\ncr\xedtica acerca de c\xf3mo mejorar una pieza de c\xf3digo o puedes pedir un ",(0,n.kt)("em",{parentName:"p"},"code-review"),", nunca falla."),(0,n.kt)("h3",{id:"pair-programming"},"Pair programming"),(0,n.kt)("p",null,"Dos cabeza piensan mejor que una, siempre ser\xe1 una experiencia\nenriquecedora trabajar con otro. Puedes consultar ",(0,n.kt)("a",{parentName:"p",href:"./pair-programming"},"este art\xedculo"),"\ncon m\xe1s informaci\xf3n acerca de c\xf3mo nos acercamos a esta pr\xe1ctica."),(0,n.kt)("h3",{id:"estudiar-y-leer"},"Estudiar y leer"),(0,n.kt)("p",null,"Adem\xe1s de leer libros acerca del tema, siempre es sano mantenerse al d\xeda de las nuevas mejoras que\ntrae EcmaScript, leer acerca de patrones de dise\xf1o que podr\xedan implementarse\npara mejorar nuestro producto y estar en contacto con la industria."),(0,n.kt)("h3",{id:"practicar"},"Practicar"),(0,n.kt)("p",null,"Como toda habilidad pr\xe1ctica, hay que practicarla. Recomiendo la cuenta\nde ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/emilybache"},"GitHub de Emily Bache"),', ella se dedica a hacer consultor\xeda y coaching\nacerca de estos temas y comparte los ejercicios que utiliza en\nsus consultor\xedas: el c\xf3digo en una tremenda cantidad de lenguajes,\nuna peque\xf1a bater\xeda de test y un readme que te puede orientar\nen algunas alternativas de refactor. Adem\xe1s, puedes encontrar las\n"soluciones" que otros dieron al problema en forma de c\xf3digo ya refactorizado. Muy recomendado.'),(0,n.kt)("h3",{id:"programaci\xf3n-en-equipo--mob-programming"},"Programaci\xf3n en equipo / mob-programming"),(0,n.kt)("p",null,"Enfrentar un refactor como equipo o con un colectivo puede ser muy enriquecedor\npara todos. Muchas veces se pueden combinar algunas sesiones colectivas\npara las operaciones m\xe1s delicadas y luego abordar el resto con ",(0,n.kt)("inlineCode",{parentName:"p"},"pair programming"),"\no como parte de un sprint."),(0,n.kt)("h2",{id:"refactorizando-en-situaciones-inc\xf3modas"},"Refactorizando en situaciones inc\xf3modas"),(0,n.kt)("p",null,"Imagina que est\xe1s en algo as\xed:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Trabajando con c\xf3digo que otra persona escribi\xf3, sobre un dominio que no manejas"),(0,n.kt)("li",{parentName:"ul"},"Podr\xeda ser c\xf3digo legado"),(0,n.kt)("li",{parentName:"ul"},"C\xf3digo complicado"),(0,n.kt)("li",{parentName:"ul"},"Larga extensi\xf3n"),(0,n.kt)("li",{parentName:"ul"},"No testeado")),(0,n.kt)("p",null,"En estos casos, antes de decidir hacia donde dirigirse, la primera\nprioridad es escribir algunos test: ojal\xe1 documentar r\xe1pidamente al menos las\nfuncionalidades que el c\xf3digo ofrece (o debiera ofrecer). En este proceso\nes muy probable que tropieces con bugs que nadie document\xf3 antes y que el\ncamino tienda a bifurcarse a otros lados."),(0,n.kt)("p",null,"Luego de contar con una cantidad digna de test, puedes comenzar el refactor."),(0,n.kt)("p",null,"Si el an\xe1lisis se vuelve a\xfan m\xe1s complicado, t\xe9cnicas como el ",(0,n.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=nJSNpcXrPYU"},"m\xe9todo")," ",(0,n.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=qvlkyJ26PGc"},"mikado")," podr\xedan ayudar a conceptualizar\nlos pasos necesarios para el refactor y planear una estrategia ganadora\ncomo equipo."),(0,n.kt)("h2",{id:"c\xf3mo-refactorizar"},"C\xf3mo refactorizar"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"TDD")," son el mejor aliado del refactor, es crucial que para refactorizar tengamos un test que nos ayude a determinar\nc\xf3mo debe funcionar el c\xf3digo. Dado que no existir\xe1 un cambio observable, las suites de test funcionales debieran\nejecutarse correctamente previo al refactor y servir\xe1 para asegurar que el refactor no atent\xf3 contra el funcionamiento."),(0,n.kt)("p",null,"Atenci\xf3n constante al detalle para evitar grandes refactors. Trabajo incremental, los cambios\ny giros estructurales que enfrenta el software debieran ocurrir de\nforma org\xe1nica, de la mano de TDD."),(0,n.kt)("p",null,"Como dec\xeda: cuando no podemos tener una idea acerca de si es posible o no tomar un incremento del backlog,\nprobablemente nos falta refactor en nuestra cultura de desarrollo"),(0,n.kt)("h2",{id:"errores-comunes"},"Errores comunes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Intentar hacer demasiado: mant\xe9n los cambios en su m\xednima expresi\xf3n\n(",(0,n.kt)("em",{parentName:"li"},"baby steps"),")"),(0,n.kt)("li",{parentName:"ul"},"No tengas miedo de volver atr\xe1s"),(0,n.kt)("li",{parentName:"ul"},"Evita las ramas (sobre todo m\xe1s de una semana), en organizaciones\ndin\xe1micas puede ser muy dif\xedcil resolver los conflictos con la rama principal"),(0,n.kt)("li",{parentName:"ul"},"El refactor debiera ser una actividad colectiva: com\xe9ntalo con tu equipo,\ncom\xe9ntalo con el equipo completo, transpar\xe9ntalo, comparte la estrategia,\ninvita a otro a acompa\xf1arte en el refactor, etc")))}d.isMDXComponent=!0},6890:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/code-refactoring-7720b069da00ea55fd4bae9caeb36cdd.jpg"}}]);